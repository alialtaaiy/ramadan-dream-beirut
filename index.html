<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ØªÙ‚ÙˆÙŠÙ… Ø±Ù…Ø¶Ø§Ù† â€” Ø­Ù„Ù… Ø¨ÙŠØ±ÙˆØª</title>

  <style>
    :root{
      --bg:#071826;
      --card:#0e2a3f;
      --card2:#0b2234;
      --gold:#f5c400;
      --text:#eaf2ff;
      --muted:#b9c7da;
      --line:rgba(255,255,255,.12);
      --shadow: 0 18px 50px rgba(0,0,0,.35);
      --radius:18px;
    }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Tahoma, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 50% 0%, #0e3a55 0%, var(--bg) 55%);
      color:var(--text);
      padding: 22px;
    }
    .wrap{ max-width: 980px; margin: 0 auto; }
    .top{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; margin-bottom: 16px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:56px; height:56px; border-radius:14px;
      background: linear-gradient(135deg, rgba(245,196,0,.25), rgba(255,255,255,.06));
      display:flex; align-items:center; justify-content:center;
      overflow:hidden; border:1px solid var(--line);
    }
    .logo img{ width:100%; height:100%; object-fit:cover; display:block; }
    .title h1{ margin:0; font-size: 26px; color: var(--gold); letter-spacing:.2px; }
    .title p{ margin:6px 0 0; color: var(--muted); font-size: 14px; }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 16px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid var(--line);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      overflow:hidden;
    }
    .cardHeader{
      padding: 14px 16px;
      background: rgba(0,0,0,.18);
      border-bottom: 1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
    }
    .cardHeader h2{
      margin:0; font-size: 16px; color: var(--gold);
      display:flex; align-items:center; gap:8px;
    }
    .cardBody{ padding: 16px; }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 520px){
      .row{ grid-template-columns: 1fr; }
    }

    label{ display:block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    select, input, button{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline:none;
      font-size: 14px;
    }
    input[type="number"]{ direction:ltr; text-align:left; }
    .hint{ font-size: 12px; color: var(--muted); margin-top: 6px; line-height:1.5; }

    .big{
      background: linear-gradient(180deg, rgba(245,196,0,.16), rgba(0,0,0,.20));
      border: 1px solid rgba(245,196,0,.35);
      border-radius: 16px;
      padding: 14px;
      display:grid;
      gap: 8px;
    }
    .big .k{ color: var(--muted); font-size: 12px; }
    .big .v{ font-size: 18px; font-weight: 700; }
    .big .vGold{ color: var(--gold); }

    .times{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (max-width: 720px){
      .times{ grid-template-columns: 1fr 1fr; }
    }
    .t{
      background: rgba(0,0,0,.22);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
    }
    .t .name{ color: var(--muted); font-size: 12px; }
    .t .val{ font-size: 16px; font-weight: 700; margin-top: 6px; }

    .btns{ display:grid; gap:10px; margin-top: 10px; }
    .btn{
      display:block; text-decoration:none;
      background: var(--gold);
      color:#071826;
      font-weight: 800;
      border-radius: 14px;
      padding: 12px;
      text-align:center;
      border: 0;
    }
    .btn.secondary{
      background: rgba(245,196,0,.12);
      color: var(--gold);
      border: 1px solid rgba(245,196,0,.35);
    }
    .footerNote{
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
      line-height:1.6;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(245,196,0,.12);
      border: 1px solid rgba(245,196,0,.30);
      color: var(--gold);
      font-size: 12px;
      white-space:nowrap;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo" title="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…">
          <!-- Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¨Ø§Ø³Ù… logo.png Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ø±ÙŠØ¨Ùˆ Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø´Ø¹Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
          <img src="logo.png" alt="Logo" onerror="this.remove(); this.parentElement.textContent='HB'; this.parentElement.style.color='#f5c400'; this.parentElement.style.fontWeight='800';"/>
        </div>
        <div class="title">
          <h1>ØªÙ‚ÙˆÙŠÙ… Ø±Ù…Ø¶Ø§Ù† â€” Ø­Ù„Ù… Ø¨ÙŠØ±ÙˆØª</h1>
          <p>Ù…Ø°Ø§Ù‚ Ø¨ÙŠØ±ÙˆØª Ø§Ù„Ø£ØµÙŠÙ„ Ø¨Ø£Ø·Ø¨Ø§Ù‚ ÙØ§Ø®Ø±Ø© ÙˆØ£Ø¬ÙˆØ§Ø¡ ØªØ£Ø®Ø°Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ù…ØªÙˆØ³Ø· â€¢ Ø§Ù„Ø¯ÙˆØ§Ù… 24 Ø³Ø§Ø¹Ø©</p>
        </div>
      </div>
      <div class="pill" id="statusPill">Ø¬Ø§Ù‡Ø²</div>
    </div>

    <div class="grid">
      <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
      <div class="card">
        <div class="cardHeader">
          <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
          <button id="btnSave" class="btn secondary" style="width:auto;padding:10px 12px;">Ø­ÙØ¸</button>
        </div>
        <div class="cardBody">
          <div class="row">
            <div>
              <label>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
              <select id="city">
                <option value="Baghdad">Ø¨ØºØ¯Ø§Ø¯</option>
                <option value="Basra">Ø§Ù„Ø¨ØµØ±Ø©</option>
              </select>
              <div class="hint">Ø­Ø§Ù„ÙŠÙ‹Ø§ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚: â€œØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚â€. Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù†Ø¶ÙŠÙ Ù…Ù†Ø§Ø·Ù‚ ØªÙØµÙŠÙ„ÙŠØ©.</div>
            </div>

            <div>
              <label>Ø§Ù„Ù…Ø°Ù‡Ø¨</label>
              <select id="sect">
                <option value="sunni">Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ø³Ù†ÙŠ</option>
                <option value="shia">Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ø´ÙŠØ¹ÙŠ</option>
              </select>
              <div class="hint">Ù‚Ø¯ ÙŠØ®ØªÙ„Ù Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ù‡Ø± Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©.</div>
            </div>

            <div>
              <label>ØªØµØ­ÙŠØ­ ÙŠÙˆÙ… Ø±Ù…Ø¶Ø§Ù† (Â±1)</label>
              <select id="offset">
                <option value="0">0 (Ø¨Ø¯ÙˆÙ† ØªØµØ­ÙŠØ­)</option>
                <option value="1">+1 ÙŠÙˆÙ…</option>
                <option value="-1">-1 ÙŠÙˆÙ…</option>
              </select>
              <div class="hint">Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ù†Ø¯Ùƒ: Ø§Ù„Ø³Ù†ÙŠ Ø§Ù„ÙŠÙˆÙ… 7 ÙˆØ§Ù„Ø´ÙŠØ¹ÙŠ Ø§Ù„ÙŠÙˆÙ… 6ØŒ Ø®Ù„Ù‘ÙŠ Ø§Ù„Ø´ÙŠØ¹ÙŠ -1 (Ø§ÙØªØ±Ø§Ø¶ÙŠ).</div>
            </div>

            <div>
              <label>Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
              <input id="date" type="date"/>
              <div class="hint">Ø¥Ø°Ø§ Ø®Ù„ÙŠØªÙ‡ ÙØ§Ø±ØºØŒ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</div>
            </div>
          </div>

          <div class="footerNote">
            âœ… Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª ÙŠØªÙ… Ø¬Ù„Ø¨Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† API Ù…Ø¬Ø§Ù†ÙŠ.  
            Ø¥Ø°Ø§ ØªØºÙŠÙ‘Ø± Ø§Ù„Ù…ØµØ¯Ø±/Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ù†Ù‚Ø¯Ø± Ù†Ø®Ù„ÙŠÙ‡Ø§ Ø®ÙŠØ§Ø± Ø£ÙŠØ¶Ø§Ù‹.
          </div>
        </div>
      </div>

      <!-- Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ù…ÙˆØ§Ù‚ÙŠØª -->
      <div class="card">
        <div class="cardHeader">
          <h2>ğŸ•Œ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ù…ÙˆØ§Ù‚ÙŠØª</h2>
          <button id="btnRefresh" class="btn secondary" style="width:auto;padding:10px 12px;">ØªØ­Ø¯ÙŠØ«</button>
        </div>
        <div class="cardBody">
          <div class="big">
            <div class="k">Ø§Ù„ÙŠÙˆÙ…</div>
            <div class="v" id="line1">â€”</div>
            <div class="k">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ</div>
            <div class="v vGold" id="hijriLine">â€”</div>
            <div class="k">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</div>
            <div class="v" id="gregLine">â€”</div>
          </div>

          <div class="times" id="times">
            <div class="t"><div class="name">Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ</div><div class="val" id="imsak">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„ÙØ¬Ø±</div><div class="val" id="fajr">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„Ø´Ø±ÙˆÙ‚</div><div class="val" id="sunrise">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„Ø¸Ù‡Ø±</div><div class="val" id="dhuhr">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„Ø¹ØµØ±</div><div class="val" id="asr">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„Ù…ØºØ±Ø¨ (Ø§Ù„Ø¥ÙØ·Ø§Ø±)</div><div class="val" id="maghrib">â€”</div></div>
            <div class="t"><div class="name">Ø§Ù„Ø¹Ø´Ø§Ø¡</div><div class="val" id="isha">â€”</div></div>
          </div>

          <div class="btns">
            <a class="btn" href="https://www.facebook.com/helemrest/" target="_blank" rel="noopener">Facebook</a>
            <a class="btn" href="https://www.instagram.com/helem.rest?igsh=bHU3azE0dGdseGVv" target="_blank" rel="noopener">Instagram</a>
            <a class="btn" href="https://wa.me/9647701111722" target="_blank" rel="noopener">ğŸ“ ÙˆØ§ØªØ³Ø§Ø¨: +964 770 111 1722</a>
            <a class="btn" href="https://wa.me/9647801111722" target="_blank" rel="noopener">ğŸ“ ÙˆØ§ØªØ³Ø§Ø¨: +964 780 111 1722</a>
            <a class="btn secondary" href="#" id="mapBtn">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ â€“ 4 Ø´ÙˆØ§Ø±Ø¹</a>
          </div>

          <div class="footerNote">
            Ù…Ù„Ø§Ø­Ø¸Ø©: Ø­Ø³Ø§Ø¨ â€œØ§Ù„ÙŠÙˆÙ… Ù…Ù† Ø±Ù…Ø¶Ø§Ù†â€ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ + Ø®ÙŠØ§Ø± Ø§Ù„ØªØµØ­ÙŠØ­ØŒ ÙˆÙ‚Ø¯ ÙŠØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ø±Ø¤ÙŠØ©.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© =====
  const DEFAULTS = {
    city: "Baghdad",
    sect: "sunni",
    // Ø¨Ù…Ø§ Ø¥Ù†Ùƒ Ù‚Ù„Øª: Ø§Ù„Ø³Ù†ÙŠ Ø§Ù„ÙŠÙˆÙ… 7 ÙˆØ§Ù„Ø´ÙŠØ¹ÙŠ Ø§Ù„ÙŠÙˆÙ… 6 -> Ø´ÙŠØ¹ÙŠ Ø£Ù‚Ù„ Ø¨ÙŠÙˆÙ…
    offsetSunni: 0,
    offsetShia: -1,
    manualOffset: 0
  };

  const $ = (id) => document.getElementById(id);

  function setStatus(text){ $("statusPill").textContent = text; }

  function loadSettings(){
    const saved = JSON.parse(localStorage.getItem("hb_ramadan_settings") || "null");
    const s = saved || DEFAULTS;

    $("city").value = s.city || DEFAULTS.city;
    $("sect").value = s.sect || DEFAULTS.sect;
    $("offset").value = String(s.manualOffset ?? DEFAULTS.manualOffset);

    // ØªØ§Ø±ÙŠØ® Ø§Ø®ØªÙŠØ§Ø±ÙŠ
    if (saved?.date) $("date").value = saved.date;
  }

  function saveSettings(){
    const data = {
      city: $("city").value,
      sect: $("sect").value,
      manualOffset: parseInt($("offset").value,10) || 0,
      date: $("date").value || ""
    };
    localStorage.setItem("hb_ramadan_settings", JSON.stringify(data));
    setStatus("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ…");
    setTimeout(()=>setStatus("Ø¬Ø§Ù‡Ø²"), 1200);
  }

  function getSelectedDate(){
    const v = $("date").value;
    if (v) return new Date(v + "T00:00:00");
    const now = new Date();
    return new Date(now.getFullYear(), now.getMonth(), now.getDate());
  }

  // Ù‡Ø¬Ø±ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ (ØªÙ‚Ø±ÙŠØ¨ÙŠ) + Ù†Ø¶ÙŠÙ Offset Ù„Ù„ÙŠÙˆÙ… Ù…Ù† Ø±Ù…Ø¶Ø§Ù† ÙÙ‚Ø·
  function getIslamicParts(date){
    // Ù†Ø³ØªØ®Ø¯Ù… ØªÙ‚ÙˆÙŠÙ… Ø§Ø³Ù„Ø§Ù…ÙŠ (Ù‚Ø¯ ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø§Ù„Ø±Ø¤ÙŠØ©)
    const fmt = new Intl.DateTimeFormat("ar-IQ-u-ca-islamic", {
      day:"numeric", month:"numeric", year:"numeric"
    });
    const parts = fmt.formatToParts(date);
    const get = (t) => parts.find(p=>p.type===t)?.value;
    // Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ©ØŒ Ù†Ø­ÙˆÙ„Ù‡Ø§ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ù†ÙƒÙ„ÙŠØ²ÙŠØ©
    const toEn = (s) => String(s).replace(/[Ù -Ù©]/g, d => "Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©".indexOf(d)).replace(/[Û°-Û¹]/g, d => "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹".indexOf(d));
    return {
      day: parseInt(toEn(get("day")),10),
      month: parseInt(toEn(get("month")),10), // Ø±Ù…Ø¶Ø§Ù† Ø¹Ø§Ø¯Ø© 9
      year: parseInt(toEn(get("year")),10),
      rawText: fmt.format(date)
    };
  }

  function formatGregorian(date){
    return new Intl.DateTimeFormat("ar-IQ", { weekday:"long", year:"numeric", month:"long", day:"numeric" }).format(date);
  }

  function getRamadanDay(isl, sect, manualOffset){
    // Ø±Ù…Ø¶Ø§Ù† Ø´Ù‡Ø± 9 ÙÙŠ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠ
    if (isl.month !== 9) return null;

    const sectOffset = (sect === "shia") ? DEFAULTS.offsetShia : DEFAULTS.offsetSunni;
    const d = isl.day + sectOffset + (manualOffset || 0);
    return d;
  }

  async function fetchTimings(date, city, sect){
    // API Ù…Ø¬Ø§Ù†ÙŠ: AlAdhan timingsByCity
    // Ù†Ø³ØªØ®Ø¯Ù… method Ø§ÙØªØ±Ø§Ø¶ÙŠØŒ ÙˆØ¥Ø°Ø§ ØªØ±ÙŠØ¯ Ù†Ø¶ÙŠÙ Ø§Ø®ØªÙŠØ§Ø± method Ù„Ø§Ø­Ù‚Ø§Ù‹
    // method=4 (Ø´Ø§Ø¦Ø¹) Ù„ÙƒÙ† ØªÙ‚Ø¯Ø± ØªØºÙŠÙŠØ±Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø©
    const d = String(date.getDate()).padStart(2,"0");
    const m = String(date.getMonth()+1).padStart(2,"0");
    const y = String(date.getFullYear());

    // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¹Ø¶ Ø§Ù„Ø¬Ù‡Ø§Øª ØªÙØ¶Ù‘Ù„ Ø·Ø±Ù‚ Ù…Ø®ØªÙ„ÙØ©Ø› Ù†Ø®Ù„ÙŠÙ‡Ø§ Ø«Ø§Ø¨ØªØ© Ø§Ù„Ø¢Ù† ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ù†Ø®Ù„ÙŠÙ‡Ø§ Ø®ÙŠØ§Ø±
    const method = 4;

    const url = `https://api.aladhan.com/v1/timingsByCity/${d}-${m}-${y}?city=${encodeURIComponent(city)}&country=Iraq&method=${method}`;

    const res = await fetch(url);
    if(!res.ok) throw new Error("API error");
    const json = await res.json();
    if(!json?.data?.timings) throw new Error("Bad response");

    // Ù†Ø£Ø®Ø° Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    const t = json.data.timings;

    // Ø¨Ø¹Ø¶ Ø§Ù„Ø±Ø¯ÙˆØ¯ ÙÙŠÙ‡Ø§ Ø«ÙˆØ§Ù†ÙŠ Ø£Ùˆ timezoneØŒ Ù†Ø®Ù„ÙŠÙ‡Ø§ HH:MM
    const clean = (v) => String(v).slice(0,5);

    return {
      imsak: clean(t.Imsak || t.Fajr),
      fajr: clean(t.Fajr),
      sunrise: clean(t.Sunrise),
      dhuhr: clean(t.Dhuhr),
      asr: clean(t.Asr),
      maghrib: clean(t.Maghrib),
      isha: clean(t.Isha)
    };
  }

  async function render(){
    setStatus("ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«â€¦");

    const date = getSelectedDate();
    const city = $("city").value;
    const sect = $("sect").value;
    const manualOffset = parseInt($("offset").value,10) || 0;

    // Ù†ØµÙˆØµ Ø§Ù„ØªØ§Ø±ÙŠØ®
    const isl = getIslamicParts(date);
    const ramDay = getRamadanDay(isl, sect, manualOffset);

    const line1 = ramDay
      ? `Ø§Ù„ÙŠÙˆÙ… ${ramDay} Ø±Ù…Ø¶Ø§Ù† ${isl.year} Ù‡Ù€ (${sect === "shia" ? "Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ø´ÙŠØ¹ÙŠ" : "Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ø³Ù†ÙŠ"})`
      : `Ù„ÙŠØ³ Ø¶Ù…Ù† Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø­Ø§Ù„ÙŠØ§Ù‹ (Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠ)`;

    $("line1").textContent = line1;
    $("hijriLine").textContent = isl.rawText;
    $("gregLine").textContent = formatGregorian(date);

    // Ù…ÙˆØ§Ù‚ÙŠØª
    try{
      const timings = await fetchTimings(date, city, sect);
      $("imsak").textContent   = timings.imsak;
      $("fajr").textContent    = timings.fajr;
      $("sunrise").textContent = timings.sunrise;
      $("dhuhr").textContent   = timings.dhuhr;
      $("asr").textContent     = timings.asr;
      $("maghrib").textContent = timings.maghrib;
      $("isha").textContent    = timings.isha;

      setStatus("ØªÙ… âœ…");
      setTimeout(()=>setStatus("Ø¬Ø§Ù‡Ø²"), 1200);
    }catch(e){
      $("imsak").textContent   = "â€”";
      $("fajr").textContent    = "â€”";
      $("sunrise").textContent = "â€”";
      $("dhuhr").textContent   = "â€”";
      $("asr").textContent     = "â€”";
      $("maghrib").textContent = "â€”";
      $("isha").textContent    = "â€”";
      setStatus("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª");
    }
  }

  // Ø®Ø±ÙŠØ·Ø©: Ø­Ø§Ù„ÙŠØ§Ù‹ Ù†ØµØŒ ÙˆØ¥Ø°Ø§ ØªÙˆÙØ± Ø±Ø§Ø¨Ø· Google Maps Ù†Ø¶Ø¹Ù‡ Ù‡Ù†Ø§
  $("mapBtn").addEventListener("click", (e)=>{
    e.preventDefault();
    alert("Ø§Ù„Ù…ÙˆÙ‚Ø¹: Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ â€“ 4 Ø´ÙˆØ§Ø±Ø¹\nØ¥Ø°Ø§ ØªØ±Ø³Ù„ Ø±Ø§Ø¨Ø· Google Maps Ø£Ø¶ÙŠÙÙ‡ ÙƒØ²Ø± ÙŠÙØªØ­ Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ù…Ø¨Ø§Ø´Ø±Ø©.");
  });

  $("btnSave").addEventListener("click", ()=>{ saveSettings(); render(); });
  $("btnRefresh").addEventListener("click", render);
  $("city").addEventListener("change", render);
  $("sect").addEventListener("change", render);
  $("offset").addEventListener("change", render);
  $("date").addEventListener("change", render);

  loadSettings();
  render();
</script>
</body>
</html>
